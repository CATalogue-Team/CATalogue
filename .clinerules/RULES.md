# CATalogue 项目开发规范

## 1. 项目结构规范
- 采用标准Flask项目结构
- 核心代码放在app/目录下
- 测试代码放在tests/目录下
- 静态资源放在static/目录下
- 模板文件放在templates/目录下

## 2. 命名规范
### 文件命名
- Python文件: 小写字母+下划线 (例: cat_service.py)
- 模板文件: 小写字母+下划线 (例: edit_cat.html)
- 测试文件: test_前缀+被测试文件名 (例: test_cat_service.py)

### 端口命名
- 主服务端口: 5000
- 测试端口: 5001
- 使用环境变量配置端口: `APP_PORT`

### 变量命名
- Python变量: 小写字母+下划线 (例: cat_list)
- 类名: 大驼峰 (例: CatService)
- 常量: 全大写+下划线 (例: MAX_UPLOAD_SIZE)

## 3. 代码质量要求
- 可移植性: 使用环境变量配置路径和参数
- 代码重用: 
  - 公共功能放在app/core/目录
  - 服务层继承BaseService
  - 路由层使用BaseCRUD
- 可扩展性:
  - 采用插件式设计
  - 使用蓝图(Blueprint)组织路由
- 代码风格:
  - 使用black进行代码格式化
  - 使用isort进行import排序
  - 使用flake8进行代码风格检查
  - 最大行长度限制为88字符

## 4. 文档规范
- 提供中英文双语文档
- 母文档链接: [README.md](README.md)
- 公共接口和模板使用英文注释
- 其他代码使用中文注释

## 5. 测试规范
- 每个Python模块应有对应的test文件
- 测试覆盖率需>80%(核心模块>90%)
- 使用pytest框架
- 测试数据放在tests/fixtures/目录
- 生成HTML覆盖率报告(htmlcov/)
- 使用pytest-cov插件统计覆盖率
- 核心服务层测试需包含边界条件测试

## 6. 提交规范
### 提交信息格式
- 类型(范围): 描述
- 示例: feat(cats): 添加猫咪搜索功能
- 类型: feat|fix|docs|style|refactor|test|chore
- 范围: 模块名或功能区域

### 提交前检查清单
1. 是否更新了文档?
2. 是否添加了对应测试?
3. 是否满足命名规范?
4. 是否考虑了可移植性?
5. 代码重用是否合理?
6. 扩展点是否明确?
7. 是否通过所有代码风格检查?
8. 测试覆盖率是否达标?

## 7. 后续开发建议
- 添加API文档生成(Swagger)
- 实现CI/CD流水线:
  - 使用GitHub Actions
  - 包含测试、构建、部署阶段
  - 集成代码质量检查
- 增加Docker支持:
  - 多阶段构建
  - 最小化基础镜像
- 添加性能测试:
  - 使用locust进行负载测试
  - 核心API响应时间<200ms
- 完善监控系统:
  - 添加Prometheus指标
  - 配置告警规则
- 添加pre-commit配置:
  - 自动运行代码格式化
  - 阻止不符合规范的提交
